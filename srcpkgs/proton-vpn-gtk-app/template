# Template file for 'proton-vpn-gtk-app'
pkgname=proton-vpn-gtk-app
version=4.9.7
revision=1

wrksrc="${pkgname}"

hostmakedepends="python3-setuptools python3-wheel python3-installer python3-build"
depends="
 python3
 python3-dbus
 python3-cairo
 python3-distro
 python3-gobject
 python3-packaging
 python3-proton-core
 python3-proton-vpn-api-core
 python3-proton-vpn-local-agent
 python3-proton-vpn-network-manager
 python3-requests
 gtk+3
 libnotify"
short_desc="ProtonVPN GTK app, Maintained by Community"
maintainer="VanillaDaFur <snowydafur@protonmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/ProtonVPN/proton-vpn-gtk-app"
distfiles="https://github.com/ProtonVPN/proton-vpn-gtk-app/archive/refs/tags/v${version}.tar.gz"
checksum="25918d3276e6aa94b8f02ed41b32938870146563e85169d0bb95c09f5d63a983"

do_build() {
  python -m build --wheel --no-isolation
}

do_install() {
  python -m installer --destdir="${DESTDIR}" dist/*.whl

	vmkdir usr/share/applications
	vmkdir usr/share/icons/hicolor/scalable/apps

	vinstall rpmbuild/SOURCES/protonvpn-app.desktop 644 usr/share/applications protonvpn.desktop
  vinstall rpmbuild/SOURCES/proton-vpn-logo.svg 644 usr/share/icons/hicolor/scalable/apps
}
